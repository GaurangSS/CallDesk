<!-- content -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<div id="content" class="app-content" role="main">
  <div class="app-content-body ">

    <div class="wrapper-md" ng-controller="FormDemoCtrl">

      <div class="panel panel-default">
        <div class="panel-heading font-bold">                  
          Contect Numbers
        </div>
        <div class="panel-body">
          <form class="form-inline" role="form"  method="post">
            <div class="form-group">
              <label for="exampleInputEmail2">Country Name</label>
              <select id='counName' name="counName" class="form-control">
                <option>select country</option>
                
                <% for (var i = 0; i < countries.length; i++) { %>
                  <option value=<%= countries[i].counName%> > <%= countries[i].counName%> </option>
                <% } %>

              </select>
            </div>
            <div class="form-group">
              <label for="exampleInputPassword2">Area Code</label>
              <select id='areaCode' name=areaCode class="form-control">
                <option>select area</option>
                <option value="510">510</option>
              </select>
            </div>
            
            <span ng-controller="ModalDemoCtrl">
              <script type="text/ng-template" id="myModalContent.html">
                <div ng-include="'tpl/modal.form.html'"></div>
              </script>
              <button class="btn btn-success" >Find Numbers</button>
            </span>
          </form>
        </div>
      </div>
    </div>
	</div>
</div> 

<script>
$(document).ready(function () {
  var counName = $('#counName').value

  $('#counName').on('change', function() {
    $.ajax({
      type: 'POST',
      url: '/postAreaCode',
      data:  {'counName': counName},
      contentType: 'application/json',

      success: function(data) {
        
        var optionsAsString = "";
        for(var i = 0; i < data.length; i++) {
            optionsAsString += "<option value='" + data[i].areaCode + "'>" + data[i].areaCode + "</option>";
        }
        
        $('#areaCode').append( optionsAsString );
      }      
    });
  });
});

</script>

  <!-- /content -->
  
  <!-- footer -->

  <!-- / footer -->